import{c as Oe,r as M,u as Be,j as s,a as He,H as Me}from"./app-DE48DAeG.js";import{S as Pe,d as Ge,u as qe,s as Ve,A as $e,i as Je}from"./app-layout-CQdXJcnl.js";import{B as a}from"./index-Cr7VuEg-.js";import{I as ze}from"./input-CUkFJoHz.js";import{L as ce}from"./label-CVsKJDdP.js";import{C as Ke}from"./checkbox-CPOIJ1VG.js";import{B as Qe}from"./badge-CuO4Vd5G.js";import{D as Ee,a as ke,b as Ie,c as Re,d as Te,e as Ae}from"./dialog-D7IFXLJ4.js";import{C as Ue,a as We,b as Xe,c as Ye}from"./card-Ds9L-jEf.js";import{I as Se}from"./input-error-XW4ZxNQd.js";import{T as Ze}from"./textarea-SpuvtA2K.js";import{F as es}from"./fullscreen-loader-CVBFq3C8.js";import{P as ss,T as ts}from"./trash-2-X-lnmqNH.js";import{P as ls}from"./plus-jddTSwcr.js";/* empty css            */import"./index-DStLr-WX.js";import"./index-CgIhwCxr.js";import"./index-CXqT-9Uj.js";import"./index-DJ0YarZM.js";import"./appearance-toggle-Cemvmr4G.js";import"./app-logo-icon-DOr4Ax2k.js";import"./users-DEy5ZNYU.js";import"./book-open-kp0bz5Wp.js";import"./circle-check-ApVl8IwL.js";import"./index-Ciis3uKO.js";import"./check-92yqOgbm.js";import"./spinner-CVlA4gbq.js";import"./loader-circle-CeztOMt_.js";import"./proxy-Biv1arMv.js";const is=[{title:"Rôles",href:Je().url}];function As(we){const e=Oe.c(117),{roles:P}=we,[me,de]=M.useState(!1),[ue,G]=M.useState(!1),[H,Ce]=M.useState(null),[i,pe]=M.useState(null),[_e,q]=M.useState(!1);let V;e[0]===Symbol.for("react.memo_cache_sentinel")?(V={name:"",slug:"",description:"",is_active:!0},e[0]=V):V=e[0];const t=Be(V);let $;e[1]===Symbol.for("react.memo_cache_sentinel")?($=l=>{Ce(l),de(!0)},e[1]=$):$=e[1];const Le=$;let J;e[2]===Symbol.for("react.memo_cache_sentinel")?(J=()=>{Ce(null),de(!1)},e[2]=J):J=e[2];const Fe=J;let K;e[3]!==H?(K=()=>{H&&(q(!0),He.delete(Ge(H.id).url,{preserveScroll:!0,onSuccess:()=>{Fe(),q(!1)},onError:()=>{q(!1)},onFinish:()=>{q(!1)}}))},e[3]=H,e[4]=K):K=e[4];const xe=K;let Q;e[5]!==t?(Q=l=>{pe(l),t.setData({name:l.name,slug:l.slug,description:l.description||"",is_active:l.is_active}),G(!0)},e[5]=t,e[6]=Q):Q=e[6];const fe=Q;let U;e[7]!==t?(U=()=>{pe(null),t.reset(),t.setData({name:"",slug:"",description:"",is_active:!0}),G(!0)},e[7]=t,e[8]=U):U=e[8];const he=U;let W;e[9]!==t?(W=()=>{G(!1),pe(null),t.reset(),t.clearErrors()},e[9]=t,e[10]=W):W=e[10];const r=W;let X;e[11]!==r||e[12]!==i||e[13]!==t?(X=l=>{l.preventDefault(),i?t.put(qe(i.id).url,{preserveScroll:!0,onSuccess:()=>{r()}}):t.post(Ve().url,{preserveScroll:!0,onSuccess:()=>{r()}})},e[11]=r,e[12]=i,e[13]=t,e[14]=X):X=e[14];const je=X;let Y;e[15]===Symbol.for("react.memo_cache_sentinel")?(Y=s.jsx(Me,{title:"Gestion des rôles"}),e[15]=Y):Y=e[15];const ge=t.processing||_e,ve=t.processing?i?"Modification du rôle en cours...":"Création du rôle en cours...":_e?"Suppression du rôle en cours...":void 0;let o;e[16]!==ge||e[17]!==ve?(o=s.jsx(es,{isLoading:ge,spinnerType:"loader2",message:ve,subtitle:"Veuillez patienter"}),e[16]=ge,e[17]=ve,e[18]=o):o=e[18];let Z;e[19]===Symbol.for("react.memo_cache_sentinel")?(Z=s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-semibold",children:"Gestion des rôles"}),s.jsx("p",{className:"text-muted-foreground text-sm",children:"Gérez les rôles et permissions de votre application"})]}),e[19]=Z):Z=e[19];let ee;e[20]===Symbol.for("react.memo_cache_sentinel")?(ee=s.jsx(ls,{className:"mr-2 size-4"}),e[20]=ee):ee=e[20];let n;e[21]!==he?(n=s.jsxs("div",{className:"flex items-center justify-between",children:[Z,s.jsxs(a,{onClick:he,children:[ee,"Nouveau rôle"]})]}),e[21]=he,e[22]=n):n=e[22];let se;e[23]===Symbol.for("react.memo_cache_sentinel")?(se=s.jsx(Xe,{children:s.jsx(Ye,{children:"Liste des rôles"})}),e[23]=se):se=e[23];let c;e[24]!==fe||e[25]!==P?(c=s.jsxs(Ue,{children:[se,s.jsx(We,{children:P.length===0?s.jsxs("div",{className:"py-8 text-center text-muted-foreground",children:[s.jsx(Pe,{className:"mx-auto mb-4 size-12 opacity-50"}),s.jsx("p",{children:"Aucun rôle trouvé"})]}):s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full",children:[s.jsx("thead",{children:s.jsxs("tr",{className:"border-b",children:[s.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium",children:"Nom"}),s.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium",children:"Slug"}),s.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium",children:"Description"}),s.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium",children:"Statut"}),s.jsx("th",{className:"px-4 py-3 text-right text-sm font-medium",children:"Actions"})]})}),s.jsx("tbody",{children:P.map(l=>s.jsxs("tr",{className:"border-b hover:bg-muted/50",children:[s.jsx("td",{className:"px-4 py-3",children:s.jsx("div",{className:"font-medium",children:l.name})}),s.jsx("td",{className:"px-4 py-3",children:s.jsx("code",{className:"text-muted-foreground rounded bg-muted px-2 py-1 text-xs",children:l.slug})}),s.jsx("td",{className:"px-4 py-3",children:s.jsx("div",{className:"text-muted-foreground text-sm max-w-md truncate",children:l.description||"-"})}),s.jsx("td",{className:"px-4 py-3",children:s.jsx(Qe,{variant:l.is_active?"success":"danger",children:l.is_active?"Actif":"Inactif"})}),s.jsx("td",{className:"px-4 py-3",children:s.jsxs("div",{className:"flex justify-end gap-2",children:[s.jsx(a,{variant:"ghost",size:"sm",onClick:()=>fe(l),children:s.jsx(ss,{className:"size-4"})}),s.jsx(a,{variant:"ghost",size:"sm",onClick:()=>Le(l),children:s.jsx(ts,{className:"size-4 text-destructive"})})]})})]},l.id))})]})})})]}),e[24]=fe,e[25]=P,e[26]=c):c=e[26];const be=i?"Modifier le rôle":"Créer un nouveau rôle";let m;e[27]!==be?(m=s.jsx(Ee,{children:be}),e[27]=be,e[28]=m):m=e[28];const Ne=i?"Modifiez les informations du rôle ci-dessous.":"Remplissez les informations pour créer un nouveau rôle.";let d;e[29]!==Ne?(d=s.jsx(ke,{children:Ne}),e[29]=Ne,e[30]=d):d=e[30];let u;e[31]!==m||e[32]!==d?(u=s.jsxs(Ie,{children:[m,d]}),e[31]=m,e[32]=d,e[33]=u):u=e[33];let te;e[34]===Symbol.for("react.memo_cache_sentinel")?(te=s.jsx(ce,{htmlFor:"name",children:"Nom *"}),e[34]=te):te=e[34];let p;e[35]!==t?(p=l=>t.setData("name",l.target.value),e[35]=t,e[36]=p):p=e[36];let x;e[37]!==t.data.name||e[38]!==p?(x=s.jsx(ze,{id:"name",value:t.data.name,onChange:p,placeholder:"Ex: Administrateur",required:!0}),e[37]=t.data.name,e[38]=p,e[39]=x):x=e[39];let f;e[40]!==t.errors.name?(f=s.jsx(Se,{message:t.errors.name}),e[40]=t.errors.name,e[41]=f):f=e[41];let h;e[42]!==x||e[43]!==f?(h=s.jsxs("div",{className:"grid gap-2",children:[te,x,f]}),e[42]=x,e[43]=f,e[44]=h):h=e[44];let le;e[45]===Symbol.for("react.memo_cache_sentinel")?(le=s.jsx(ce,{htmlFor:"slug",children:"Slug"}),e[45]=le):le=e[45];let j;e[46]!==t?(j=l=>t.setData("slug",l.target.value),e[46]=t,e[47]=j):j=e[47];let g;e[48]!==t.data.slug||e[49]!==j?(g=s.jsx(ze,{id:"slug",value:t.data.slug,onChange:j,placeholder:"Ex: admin (généré automatiquement si vide)"}),e[48]=t.data.slug,e[49]=j,e[50]=g):g=e[50];let v;e[51]!==t.errors.slug?(v=s.jsx(Se,{message:t.errors.slug}),e[51]=t.errors.slug,e[52]=v):v=e[52];let b;e[53]!==g||e[54]!==v?(b=s.jsxs("div",{className:"grid gap-2",children:[le,g,v]}),e[53]=g,e[54]=v,e[55]=b):b=e[55];let ie;e[56]===Symbol.for("react.memo_cache_sentinel")?(ie=s.jsx(ce,{htmlFor:"description",children:"Description"}),e[56]=ie):ie=e[56];let N;e[57]!==t?(N=l=>t.setData("description",l.target.value),e[57]=t,e[58]=N):N=e[58];let y;e[59]!==t.data.description||e[60]!==N?(y=s.jsx(Ze,{id:"description",value:t.data.description,onChange:N,placeholder:"Description du rôle",rows:3}),e[59]=t.data.description,e[60]=N,e[61]=y):y=e[61];let D;e[62]!==t.errors.description?(D=s.jsx(Se,{message:t.errors.description}),e[62]=t.errors.description,e[63]=D):D=e[63];let S;e[64]!==y||e[65]!==D?(S=s.jsxs("div",{className:"grid gap-2",children:[ie,y,D]}),e[64]=y,e[65]=D,e[66]=S):S=e[66];let C;e[67]!==t?(C=l=>t.setData("is_active",l===!0),e[67]=t,e[68]=C):C=e[68];let _;e[69]!==t.data.is_active||e[70]!==C?(_=s.jsx(Ke,{id:"is_active",checked:t.data.is_active,onCheckedChange:C}),e[69]=t.data.is_active,e[70]=C,e[71]=_):_=e[71];let re;e[72]===Symbol.for("react.memo_cache_sentinel")?(re=s.jsx(ce,{htmlFor:"is_active",className:"cursor-pointer",children:"Rôle actif"}),e[72]=re):re=e[72];let F;e[73]!==_?(F=s.jsxs("div",{className:"flex items-center space-x-2",children:[_,re]}),e[73]=_,e[74]=F):F=e[74];let z;e[75]!==r||e[76]!==t.processing?(z=s.jsx(a,{type:"button",variant:"danger",onClick:r,disabled:t.processing,children:"Annuler"}),e[75]=r,e[76]=t.processing,e[77]=z):z=e[77];const ye=i?"Modifier":"Créer";let E;e[78]!==t.processing||e[79]!==ye?(E=s.jsx(a,{type:"submit",disabled:t.processing,children:ye}),e[78]=t.processing,e[79]=ye,e[80]=E):E=e[80];let k;e[81]!==z||e[82]!==E?(k=s.jsxs(Re,{children:[z,E]}),e[81]=z,e[82]=E,e[83]=k):k=e[83];let I;e[84]!==je||e[85]!==h||e[86]!==b||e[87]!==S||e[88]!==F||e[89]!==k?(I=s.jsxs("form",{onSubmit:je,className:"space-y-4",children:[h,b,S,F,k]}),e[84]=je,e[85]=h,e[86]=b,e[87]=S,e[88]=F,e[89]=k,e[90]=I):I=e[90];let R;e[91]!==u||e[92]!==I?(R=s.jsxs(Te,{className:"max-w-2xl",children:[u,I]}),e[91]=u,e[92]=I,e[93]=R):R=e[93];let T;e[94]!==ue||e[95]!==R?(T=s.jsx(Ae,{open:ue,onOpenChange:G,children:R}),e[94]=ue,e[95]=R,e[96]=T):T=e[96];let ae;e[97]===Symbol.for("react.memo_cache_sentinel")?(ae=s.jsx(Ee,{children:"Confirmer la suppression"}),e[97]=ae):ae=e[97];const De=H?.name;let A;e[98]!==De?(A=s.jsxs(Ie,{children:[ae,s.jsxs(ke,{children:["Êtes-vous sûr de vouloir supprimer le rôle"," ",s.jsx("strong",{children:De})," ? Cette action est irréversible et supprimera également toutes les associations avec les utilisateurs."]})]}),e[98]=De,e[99]=A):A=e[99];let oe;e[100]===Symbol.for("react.memo_cache_sentinel")?(oe=s.jsx(a,{variant:"secondary",onClick:Fe,children:"Annuler"}),e[100]=oe):oe=e[100];let w;e[101]!==xe?(w=s.jsxs(Re,{children:[oe,s.jsx(a,{variant:"destructive",onClick:xe,children:"Supprimer"})]}),e[101]=xe,e[102]=w):w=e[102];let L;e[103]!==A||e[104]!==w?(L=s.jsxs(Te,{children:[A,w]}),e[103]=A,e[104]=w,e[105]=L):L=e[105];let O;e[106]!==me||e[107]!==L?(O=s.jsx(Ae,{open:me,onOpenChange:de,children:L}),e[106]=me,e[107]=L,e[108]=O):O=e[108];let B;e[109]!==n||e[110]!==c||e[111]!==T||e[112]!==O?(B=s.jsxs("div",{className:"flex h-full flex-1 flex-col gap-6 overflow-x-auto rounded-xl p-4",children:[n,c,T,O]}),e[109]=n,e[110]=c,e[111]=T,e[112]=O,e[113]=B):B=e[113];let ne;return e[114]!==o||e[115]!==B?(ne=s.jsxs($e,{breadcrumbs:is,children:[Y,o,B]}),e[114]=o,e[115]=B,e[116]=ne):ne=e[116],ne}export{As as default};
