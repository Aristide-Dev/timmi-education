import{c as P,b as R,r as L,j as s,a as H,H as V}from"./app-DE48DAeG.js";import{C as G,p as U,k as $,A as q,r as J}from"./app-layout-CQdXJcnl.js";import{B as z}from"./index-Cr7VuEg-.js";import{B as I}from"./badge-CuO4Vd5G.js";import{D as K,b as M,a as Q,c as W,d as X,e as Y}from"./dialog-D7IFXLJ4.js";import{b as Z,c as ee,a as se,C as te}from"./card-Ds9L-jEf.js";import{F as le}from"./fullscreen-loader-CVBFq3C8.js";import{P as ie,T as re}from"./trash-2-X-lnmqNH.js";/* empty css            */import"./index-DStLr-WX.js";import"./index-CgIhwCxr.js";import"./index-CXqT-9Uj.js";import"./index-DJ0YarZM.js";import"./appearance-toggle-Cemvmr4G.js";import"./app-logo-icon-DOr4Ax2k.js";import"./users-DEy5ZNYU.js";import"./book-open-kp0bz5Wp.js";import"./circle-check-ApVl8IwL.js";import"./spinner-CVlA4gbq.js";import"./loader-circle-CeztOMt_.js";import"./proxy-Biv1arMv.js";const ae=[{title:"Élèves",href:J().url}];function _e(h){const e=P.c(37),{students:l}=h,{auth:u}=R().props,[w,T]=L.useState(!1),[i,B]=L.useState(null),[_,j]=L.useState(!1);let v;e[0]===Symbol.for("react.memo_cache_sentinel")?(v=t=>{B(t),T(!0)},e[0]=v):v=e[0];const O=v;let g;e[1]===Symbol.for("react.memo_cache_sentinel")?(g=()=>{B(null),T(!1)},e[1]=g):g=e[1];const F=g;let N;e[2]!==i?(N=()=>{i&&(j(!0),H.delete($(i.uuid).url,{preserveScroll:!0,onSuccess:()=>{F(),j(!1)},onError:()=>{j(!1)},onFinish:()=>{j(!1)}}))},e[2]=i,e[3]=N):N=e[3];const A=N;let y;e[4]===Symbol.for("react.memo_cache_sentinel")?(y=s.jsx(V,{title:"Liste des élèves"}),e[4]=y):y=e[4];let r;e[5]!==_?(r=s.jsx(le,{isLoading:_,spinnerType:"loader2",message:"Suppression de l'élève en cours...",subtitle:"Veuillez patienter"}),e[5]=_,e[6]=r):r=e[6];let b;e[7]===Symbol.for("react.memo_cache_sentinel")?(b=s.jsx("div",{className:"flex items-center justify-between",children:s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-semibold",children:"Liste des élèves"}),s.jsx("p",{className:"text-muted-foreground text-sm",children:"Gérez les élèves de votre établissement"})]})}),e[7]=b):b=e[7];let a;e[8]!==l.length?(a=s.jsx(Z,{children:s.jsxs(ee,{children:["Élèves (",l.length,")"]})}),e[8]=l.length,e[9]=a):a=e[9];let o;e[10]!==u||e[11]!==l?(o=s.jsx(se,{children:l.length===0?s.jsxs("div",{className:"py-8 text-center text-muted-foreground",children:[s.jsx(G,{className:"mx-auto mb-4 size-12 opacity-50"}),s.jsx("p",{children:"Aucun élève trouvé"})]}):s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full",children:[s.jsx("thead",{children:s.jsxs("tr",{className:"border-b",children:[s.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium",children:"Nom"}),s.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium",children:"Email"}),s.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium",children:"Rôles"}),s.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium",children:"Email vérifié"}),s.jsx("th",{className:"px-4 py-3 text-right text-sm font-medium",children:"Actions"})]})}),s.jsx("tbody",{children:l.map(t=>s.jsxs("tr",{className:"border-b hover:bg-muted/50",children:[s.jsx("td",{className:"px-4 py-3",children:s.jsx("div",{className:"font-medium",children:t.name})}),s.jsx("td",{className:"px-4 py-3",children:s.jsx("div",{className:"text-sm",children:t.email})}),s.jsx("td",{className:"px-4 py-3",children:s.jsx("div",{className:"flex flex-wrap gap-1",children:t.roles&&t.roles.length>0?t.roles.map(oe):s.jsx("span",{className:"text-muted-foreground text-xs",children:"Aucun rôle"})})}),s.jsx("td",{className:"px-4 py-3",children:s.jsx(I,{variant:t.email_verified_at?"success":"warning",children:t.email_verified_at?"Vérifié":"Non vérifié"})}),s.jsx("td",{className:"px-4 py-3",children:s.jsxs("div",{className:"flex justify-end gap-2",children:[s.jsx(z,{variant:"ghost",size:"sm",onClick:()=>H.visit(U(t.uuid).url),children:s.jsx(ie,{className:"size-4"})}),s.jsx(z,{variant:"ghost",size:"sm",onClick:()=>O(t),disabled:t.id===u.user.id,title:t.id===u.user.id?"Vous ne pouvez pas supprimer votre propre compte":"Supprimer",children:s.jsx(re,{className:"size-4 text-destructive"})})]})})]},t.id))})]})})}),e[10]=u,e[11]=l,e[12]=o):o=e[12];let n;e[13]!==a||e[14]!==o?(n=s.jsxs(te,{children:[a,o]}),e[13]=a,e[14]=o,e[15]=n):n=e[15];let D;e[16]===Symbol.for("react.memo_cache_sentinel")?(D=s.jsx(K,{children:"Confirmer la suppression"}),e[16]=D):D=e[16];const E=i?.name;let c;e[17]!==E?(c=s.jsx("strong",{children:E}),e[17]=E,e[18]=c):c=e[18];const k=i?.email;let m;e[19]!==c||e[20]!==k?(m=s.jsxs(M,{children:[D,s.jsxs(Q,{children:["Êtes-vous sûr de vouloir supprimer l'élève"," ",c," (",k,") ? Cette action est irréversible."]})]}),e[19]=c,e[20]=k,e[21]=m):m=e[21];let C;e[22]===Symbol.for("react.memo_cache_sentinel")?(C=s.jsx(z,{variant:"secondary",onClick:F,children:"Annuler"}),e[22]=C):C=e[22];let d;e[23]!==A?(d=s.jsxs(W,{children:[C,s.jsx(z,{variant:"destructive",onClick:A,children:"Supprimer"})]}),e[23]=A,e[24]=d):d=e[24];let x;e[25]!==m||e[26]!==d?(x=s.jsxs(X,{children:[m,d]}),e[25]=m,e[26]=d,e[27]=x):x=e[27];let p;e[28]!==w||e[29]!==x?(p=s.jsx(Y,{open:w,onOpenChange:T,children:x}),e[28]=w,e[29]=x,e[30]=p):p=e[30];let f;e[31]!==p||e[32]!==n?(f=s.jsxs("div",{className:"flex h-full flex-1 flex-col gap-6 overflow-x-auto rounded-xl p-4",children:[b,n,p]}),e[31]=p,e[32]=n,e[33]=f):f=e[33];let S;return e[34]!==f||e[35]!==r?(S=s.jsxs(q,{breadcrumbs:ae,children:[y,r,f]}),e[34]=f,e[35]=r,e[36]=S):S=e[36],S}function oe(h){return s.jsx(I,{variant:"secondary",children:h.name},h.id)}export{_e as default};
