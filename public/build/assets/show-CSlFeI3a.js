import{c as Ce,r as Me,u as we,j as s,H as Be,a as ye}from"./app-DE48DAeG.js";import{m as Ie,j as Pe,A as ke,f as be}from"./app-layout-CQdXJcnl.js";import{c as qe,B as je}from"./index-Cr7VuEg-.js";import{B as ne}from"./badge-CuO4Vd5G.js";import{C as ie,b as ae,c as le,d as ge,a as re}from"./card-Ds9L-jEf.js";import{C as Ae}from"./checkbox-CPOIJ1VG.js";import{L as r}from"./label-CVsKJDdP.js";import{d as De,S as Fe,a as Le,b as Ee,c as _e}from"./select-Dxa_0Yqx.js";import{F as $e}from"./fullscreen-loader-CVBFq3C8.js";import{g as Re,a as Te,b as He,c as ze}from"./regions-D6GoszTi.js";import{P as Ge}from"./phone-CrAsWcDZ.js";import{M as Oe}from"./map-pin-CxKWqsKN.js";import{G as Ve,M as Je}from"./appearance-toggle-Cemvmr4G.js";import{U as Qe}from"./user-BhXV5W4W.js";import{B as Ue}from"./book-open-kp0bz5Wp.js";import{S as Ke}from"./save-BtuB1bAp.js";/* empty css            */import"./index-DStLr-WX.js";import"./index-CgIhwCxr.js";import"./index-CXqT-9Uj.js";import"./index-DJ0YarZM.js";import"./app-logo-icon-DOr4Ax2k.js";import"./users-DEy5ZNYU.js";import"./circle-check-ApVl8IwL.js";import"./index-Ciis3uKO.js";import"./check-92yqOgbm.js";import"./spinner-CVlA4gbq.js";import"./loader-circle-CeztOMt_.js";import"./proxy-Biv1arMv.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const We=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],Xe=qe("SquarePen",We),Ye=[{title:"Professeurs",href:be().url}];function qs(n){const e=Ce.c(97),{teacher:t,matieres:L,niveaux:x}=n,[o,Ne]=Me.useState(!1);let E;e[0]!==t.region_id?(E=t.region_id?Re(t.region_id):null,e[0]=t.region_id,e[1]=E):E=e[1];const q=E;let $;e[2]!==t.prefecture_id?($=t.prefecture_id?Te(t.prefecture_id):null,e[2]=t.prefecture_id,e[3]=$):$=e[3];const A=$;let R;e[4]!==t.commune_id?(R=t.commune_id?He(t.commune_id):null,e[4]=t.commune_id,e[5]=R):R=e[5];const D=R;let T;e[6]!==t.quartier_id?(T=t.quartier_id?ze(t.quartier_id):null,e[6]=t.quartier_id,e[7]=T):T=e[7];const F=T,ve=(t.matieres||[]).map(ts),a=we({matieres:ve});let H;e[8]!==a?(H=i=>{const l=a.data.matieres||[],m=l.findIndex(d=>d.matiere_id===i);m>=0?a.setData("matieres",l.filter((d,c)=>c!==m)):a.setData("matieres",[...l,{matiere_id:i,niveau_id:null}])},e[8]=a,e[9]=H):H=e[9];const me=H;let z;e[10]!==a?(z=(i,l)=>{const d=(a.data.matieres||[]).map(c=>c.matiere_id===i?{...c,niveau_id:l==="all"||l===""?null:Number(l)}:c);a.setData("matieres",d)},e[10]=a,e[11]=z):z=e[11];const ce=z;let G;e[12]!==a.data.matieres?(G=i=>a.data.matieres?.find(m=>m.matiere_id===i)?.niveau_id??null,e[12]=a.data.matieres,e[13]=G):G=e[13];const de=G;let O;e[14]!==a.data.matieres?(O=i=>a.data.matieres?.some(l=>l.matiere_id===i)??!1,e[14]=a.data.matieres,e[15]=O):O=e[15];const oe=O;let V;e[16]!==a||e[17]!==t.id?(V=i=>{i.preventDefault(),Ne(!0),a.put(Ie(t.id).url,{preserveScroll:!0,onFinish:()=>Ne(!1)})},e[16]=a,e[17]=t.id,e[18]=V):V=e[18];const xe=V;let J;e[19]!==a.data.matieres?(J=JSON.stringify(a.data.matieres),e[19]=a.data.matieres,e[20]=J):J=e[20];const Se=J!==JSON.stringify(ve),fe=`Détails - ${t.name}`;let f;e[21]!==fe?(f=s.jsx(Be,{title:fe}),e[21]=fe,e[22]=f):f=e[22];let h;e[23]!==o?(h=s.jsx($e,{isLoading:o}),e[23]=o,e[24]=h):h=e[24];let Q;e[25]===Symbol.for("react.memo_cache_sentinel")?(Q=s.jsxs("div",{children:[s.jsxs("h1",{className:"text-3xl font-bold flex items-center gap-2",children:[s.jsx(Ve,{className:"h-8 w-8"}),"Détails du professeur"]}),s.jsx("p",{className:"text-gray-600 mt-2",children:"Gérez les informations et les matières enseignées"})]}),e[25]=Q):Q=e[25];let u;e[26]!==t.uuid?(u=()=>ye.visit(Pe(t.uuid).url),e[26]=t.uuid,e[27]=u):u=e[27];let U;e[28]===Symbol.for("react.memo_cache_sentinel")?(U=s.jsx(Xe,{className:"h-4 w-4"}),e[28]=U):U=e[28];let p;e[29]!==u?(p=s.jsxs("div",{className:"mb-6 flex items-start justify-between",children:[Q,s.jsxs(je,{onClick:u,className:"flex items-center gap-2",children:[U,"Modifier"]})]}),e[29]=u,e[30]=p):p=e[30];let K;e[31]===Symbol.for("react.memo_cache_sentinel")?(K=s.jsxs(ae,{children:[s.jsxs(le,{className:"flex items-center gap-2",children:[s.jsx(Qe,{className:"h-5 w-5"}),"Informations personnelles"]}),s.jsx(ge,{children:"Détails du compte professeur"})]}),e[31]=K):K=e[31];let W;e[32]===Symbol.for("react.memo_cache_sentinel")?(W=s.jsx(r,{className:"text-sm font-medium text-gray-500",children:"Nom"}),e[32]=W):W=e[32];let j;e[33]!==t.name?(j=s.jsxs("div",{children:[W,s.jsx("p",{className:"text-lg font-semibold",children:t.name})]}),e[33]=t.name,e[34]=j):j=e[34];let X;e[35]===Symbol.for("react.memo_cache_sentinel")?(X=s.jsxs(r,{className:"flex items-center gap-2 text-sm font-medium text-gray-500",children:[s.jsx(Je,{className:"h-4 w-4"}),"Email"]}),e[35]=X):X=e[35];let g;e[36]!==t.email?(g=s.jsxs("div",{children:[X,s.jsx("p",{className:"text-lg font-semibold",children:t.email})]}),e[36]=t.email,e[37]=g):g=e[37];let Y;e[38]===Symbol.for("react.memo_cache_sentinel")?(Y=s.jsx(r,{className:"text-sm font-medium text-gray-500",children:"Rôles"}),e[38]=Y):Y=e[38];let N;e[39]!==t.roles?(N=t.roles&&t.roles.length>0?t.roles.map(ss):s.jsx("span",{className:"text-gray-500",children:"Aucun rôle"}),e[39]=t.roles,e[40]=N):N=e[40];let v;e[41]!==N?(v=s.jsxs("div",{children:[Y,s.jsx("div",{className:"flex flex-wrap gap-2 mt-2",children:N})]}),e[41]=N,e[42]=v):v=e[42];let Z;e[43]===Symbol.for("react.memo_cache_sentinel")?(Z=s.jsx(r,{className:"text-sm font-medium text-gray-500",children:"Email vérifié"}),e[43]=Z):Z=e[43];const he=t.email_verified_at?"default":"destructive",ue=t.email_verified_at?"Vérifié":"Non vérifié";let y;e[44]!==he||e[45]!==ue?(y=s.jsxs("div",{children:[Z,s.jsx(ne,{variant:he,className:"mt-2",children:ue})]}),e[44]=he,e[45]=ue,e[46]=y):y=e[46];let b;e[47]!==t.telephone?(b=t.telephone&&s.jsxs("div",{children:[s.jsxs(r,{className:"flex items-center gap-2 text-sm font-medium text-gray-500",children:[s.jsx(Ge,{className:"h-4 w-4"}),"Téléphone"]}),s.jsx("p",{className:"text-lg font-semibold",children:t.telephone})]}),e[47]=t.telephone,e[48]=b):b=e[48];let _;e[49]!==t.bio?(_=t.bio&&s.jsxs("div",{className:"md:col-span-2",children:[s.jsx(r,{className:"text-sm font-medium text-gray-500",children:"Biographie"}),s.jsx("p",{className:"text-base mt-1",children:t.bio})]}),e[49]=t.bio,e[50]=_):_=e[50];let S;e[51]!==j||e[52]!==g||e[53]!==v||e[54]!==y||e[55]!==b||e[56]!==_?(S=s.jsxs(ie,{className:"mb-6",children:[K,s.jsx(re,{children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[j,g,v,y,b,_]})})]}),e[51]=j,e[52]=g,e[53]=v,e[54]=y,e[55]=b,e[56]=_,e[57]=S):S=e[57];let C;e[58]!==D||e[59]!==A||e[60]!==F||e[61]!==q||e[62]!==t.adresse||e[63]!==t.pays?(C=(t.pays||q||A||D||F||t.adresse)&&s.jsxs(ie,{className:"mb-6",children:[s.jsxs(ae,{children:[s.jsxs(le,{className:"flex items-center gap-2",children:[s.jsx(Oe,{className:"h-5 w-5"}),"Localisation"]}),s.jsx(ge,{children:"Informations de localisation du professeur"})]}),s.jsx(re,{children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[t.pays&&s.jsxs("div",{children:[s.jsx(r,{className:"text-sm font-medium text-gray-500",children:"Pays"}),s.jsx("p",{className:"text-lg font-semibold",children:t.pays})]}),q&&s.jsxs("div",{children:[s.jsx(r,{className:"text-sm font-medium text-gray-500",children:"Région"}),s.jsx("p",{className:"text-lg font-semibold",children:q.nom})]}),A&&s.jsxs("div",{children:[s.jsx(r,{className:"text-sm font-medium text-gray-500",children:"Préfecture"}),s.jsx("p",{className:"text-lg font-semibold",children:A.nom})]}),D&&s.jsxs("div",{children:[s.jsx(r,{className:"text-sm font-medium text-gray-500",children:"Commune"}),s.jsx("p",{className:"text-lg font-semibold",children:D.nom})]}),F&&s.jsxs("div",{children:[s.jsx(r,{className:"text-sm font-medium text-gray-500",children:"Quartier"}),s.jsx("p",{className:"text-lg font-semibold",children:F.nom})]}),t.adresse&&s.jsxs("div",{className:"md:col-span-2",children:[s.jsx(r,{className:"text-sm font-medium text-gray-500",children:"Adresse complète"}),s.jsx("p",{className:"text-base mt-1",children:t.adresse})]})]})})]}),e[58]=D,e[59]=A,e[60]=F,e[61]=q,e[62]=t.adresse,e[63]=t.pays,e[64]=C):C=e[64];let ee;e[65]===Symbol.for("react.memo_cache_sentinel")?(ee=s.jsxs(ae,{children:[s.jsxs(le,{className:"flex items-center gap-2",children:[s.jsx(Ue,{className:"h-5 w-5"}),"Matières enseignées"]}),s.jsx(ge,{children:"Sélectionnez les matières que ce professeur enseigne"})]}),e[65]=ee):ee=e[65];let M;e[66]!==de||e[67]!==me||e[68]!==ce||e[69]!==oe||e[70]!==L||e[71]!==x||e[72]!==t.matieres?(M=s.jsxs(ie,{className:"mb-6",children:[ee,s.jsx(re,{children:L.length===0?s.jsx("p",{className:"text-gray-500",children:"Aucune matière disponible"}):s.jsx("div",{className:"space-y-4",children:L.map(i=>{const l=oe(i.id),m=de(i.id),d=(t.matieres||[]).some(c=>c.id===i.id);return s.jsxs("div",{className:"p-3 border rounded-lg hover:bg-gray-50 transition space-y-3",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-3 flex-1",children:[s.jsx(Ae,{id:`matiere-${i.id}`,checked:l,onCheckedChange:()=>me(i.id)}),s.jsxs(r,{htmlFor:`matiere-${i.id}`,className:"cursor-pointer flex-1",children:[s.jsx("p",{className:"font-medium",children:i.name}),s.jsx("p",{className:"text-sm text-gray-500",children:i.code})]})]}),d&&s.jsx(ne,{variant:"outline",className:"ml-2",children:"Assignée"})]}),l&&s.jsxs("div",{className:"ml-8 space-y-2",children:[s.jsx(r,{htmlFor:`niveau-${i.id}`,className:"text-sm font-medium",children:"Niveau d'enseignement"}),s.jsxs(De,{value:m?String(m):"all",onValueChange:c=>ce(i.id,c),children:[s.jsx(Fe,{id:`niveau-${i.id}`,className:"w-full",children:s.jsx(Le,{placeholder:"Sélectionner un niveau"})}),s.jsxs(Ee,{children:[s.jsx(_e,{value:"all",children:"Tous les niveaux"}),x.map(es)]})]})]})]},i.id)})})})]}),e[66]=de,e[67]=me,e[68]=ce,e[69]=oe,e[70]=L,e[71]=x,e[72]=t.matieres,e[73]=M):M=e[73];let w;e[74]!==o?(w=s.jsx(je,{type:"button",variant:"outline",disabled:o,onClick:Ze,children:"Annuler"}),e[74]=o,e[75]=w):w=e[75];const pe=o||!Se;let se;e[76]===Symbol.for("react.memo_cache_sentinel")?(se=s.jsx(Ke,{className:"h-4 w-4"}),e[76]=se):se=e[76];let B;e[77]!==pe?(B=s.jsxs(je,{type:"submit",disabled:pe,className:"flex items-center gap-2",children:[se,"Enregistrer"]}),e[77]=pe,e[78]=B):B=e[78];let I;e[79]!==w||e[80]!==B?(I=s.jsxs("div",{className:"flex gap-3 justify-end mb-6",children:[w,B]}),e[79]=w,e[80]=B,e[81]=I):I=e[81];let P;e[82]!==xe||e[83]!==M||e[84]!==I?(P=s.jsxs("form",{onSubmit:xe,children:[M,I]}),e[82]=xe,e[83]=M,e[84]=I,e[85]=P):P=e[85];let k;e[86]!==x||e[87]!==t.matieres?(k=t.matieres&&t.matieres.length>0&&s.jsxs(ie,{children:[s.jsx(ae,{children:s.jsxs(le,{children:["Matières actuellement assignées (",t.matieres.length,")"]})}),s.jsx(re,{children:s.jsx("div",{className:"flex flex-wrap gap-2",children:t.matieres.map(i=>{const l=i.pivot?.niveau_id,m=l?x.find(d=>d.id===l):null;return s.jsxs(ne,{variant:"secondary",className:"flex items-center gap-1",children:[s.jsxs("span",{children:[i.name," (",i.code,")"]}),m&&s.jsxs(s.Fragment,{children:[s.jsx("span",{className:"mx-1",children:"•"}),s.jsx("span",{className:"text-xs opacity-75",children:m.name})]})]},i.id)})})})]}),e[86]=x,e[87]=t.matieres,e[88]=k):k=e[88];let te;return e[89]!==f||e[90]!==h||e[91]!==p||e[92]!==S||e[93]!==C||e[94]!==P||e[95]!==k?(te=s.jsxs(ke,{breadcrumbs:Ye,children:[f,h,p,S,C,P,k]}),e[89]=f,e[90]=h,e[91]=p,e[92]=S,e[93]=C,e[94]=P,e[95]=k,e[96]=te):te=e[96],te}function Ze(){return ye.visit(be().url)}function es(n){return s.jsxs(_e,{value:String(n.id),children:[n.name," (",n.code,")"]},n.id)}function ss(n){return s.jsx(ne,{variant:"secondary",children:n.name},n.id)}function ts(n){return{matiere_id:n.id,niveau_id:n.pivot?.niveau_id??null}}export{qs as default};
