import{c as O,b as R,r as k,j as s,a as F,H as V}from"./app-qCQb-rXY.js";import{p as U,k as q,A as G,q as $}from"./app-layout-B_r3Rrx0.js";import{B as z}from"./index-2ggMmHzy.js";import{B as H}from"./badge-CL45NMRh.js";import{D as J,b as K,a as M,c as Q,d as W,e as X}from"./dialog-BtfiXu_M.js";import{b as Y,c as Z,a as ee,C as se}from"./card-jlbms5zY.js";import{F as te}from"./fullscreen-loader-84ZMV8ZG.js";import{U as le}from"./users-DTuUKQNx.js";import{P as ie,T as re}from"./trash-2-D_wEUTA-.js";/* empty css            */import"./index-DTzN7dy9.js";import"./index-C5Pla0PL.js";import"./index-CFui-q-R.js";import"./index-Bp3BDrT3.js";import"./appearance-toggle-ChiM-gZ_.js";import"./app-logo-icon-0au9t1J9.js";import"./book-open-D8zXQ9gB.js";import"./circle-check-C-ylYjZw.js";import"./spinner-CjvqpGox.js";import"./loader-circle-DMxENiy8.js";import"./proxy-qTeWVQOY.js";const ae=[{title:"Parents",href:$().url}];function Te(u){const e=O.c(37),{parents:l}=u,{auth:h}=R().props,[w,P]=k.useState(!1),[i,L]=k.useState(null),[T,j]=k.useState(!1);let g;e[0]===Symbol.for("react.memo_cache_sentinel")?(g=t=>{L(t),P(!0)},e[0]=g):g=e[0];const I=g;let v;e[1]===Symbol.for("react.memo_cache_sentinel")?(v=()=>{L(null),P(!1)},e[1]=v):v=e[1];const B=v;let N;e[2]!==i?(N=()=>{i&&(j(!0),F.delete(q(i.uuid).url,{preserveScroll:!0,onSuccess:()=>{B(),j(!1)},onError:()=>{j(!1)},onFinish:()=>{j(!1)}}))},e[2]=i,e[3]=N):N=e[3];const _=N;let y;e[4]===Symbol.for("react.memo_cache_sentinel")?(y=s.jsx(V,{title:"Liste des parents"}),e[4]=y):y=e[4];let r;e[5]!==T?(r=s.jsx(te,{isLoading:T,spinnerType:"loader2",message:"Suppression du parent en cours...",subtitle:"Veuillez patienter"}),e[5]=T,e[6]=r):r=e[6];let b;e[7]===Symbol.for("react.memo_cache_sentinel")?(b=s.jsx("div",{className:"flex items-center justify-between",children:s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-semibold",children:"Liste des parents"}),s.jsx("p",{className:"text-muted-foreground text-sm",children:"Gérez les parents d'élèves de votre établissement"})]})}),e[7]=b):b=e[7];let a;e[8]!==l.length?(a=s.jsx(Y,{children:s.jsxs(Z,{children:["Parents (",l.length,")"]})}),e[8]=l.length,e[9]=a):a=e[9];let n;e[10]!==h||e[11]!==l?(n=s.jsx(ee,{children:l.length===0?s.jsxs("div",{className:"py-8 text-center text-muted-foreground",children:[s.jsx(le,{className:"mx-auto mb-4 size-12 opacity-50"}),s.jsx("p",{children:"Aucun parent trouvé"})]}):s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full",children:[s.jsx("thead",{children:s.jsxs("tr",{className:"border-b",children:[s.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium",children:"Nom"}),s.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium",children:"Email"}),s.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium",children:"Rôles"}),s.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium",children:"Email vérifié"}),s.jsx("th",{className:"px-4 py-3 text-right text-sm font-medium",children:"Actions"})]})}),s.jsx("tbody",{children:l.map(t=>s.jsxs("tr",{className:"border-b hover:bg-muted/50",children:[s.jsx("td",{className:"px-4 py-3",children:s.jsx("div",{className:"font-medium",children:t.name})}),s.jsx("td",{className:"px-4 py-3",children:s.jsx("div",{className:"text-sm",children:t.email})}),s.jsx("td",{className:"px-4 py-3",children:s.jsx("div",{className:"flex flex-wrap gap-1",children:t.roles&&t.roles.length>0?t.roles.map(ne):s.jsx("span",{className:"text-muted-foreground text-xs",children:"Aucun rôle"})})}),s.jsx("td",{className:"px-4 py-3",children:s.jsx(H,{variant:t.email_verified_at?"success":"warning",children:t.email_verified_at?"Vérifié":"Non vérifié"})}),s.jsx("td",{className:"px-4 py-3",children:s.jsxs("div",{className:"flex justify-end gap-2",children:[s.jsx(z,{variant:"ghost",size:"sm",onClick:()=>F.visit(U(t.uuid).url),children:s.jsx(ie,{className:"size-4"})}),s.jsx(z,{variant:"ghost",size:"sm",onClick:()=>I(t),disabled:t.id===h.user.id,title:t.id===h.user.id?"Vous ne pouvez pas supprimer votre propre compte":"Supprimer",children:s.jsx(re,{className:"size-4 text-destructive"})})]})})]},t.id))})]})})}),e[10]=h,e[11]=l,e[12]=n):n=e[12];let o;e[13]!==a||e[14]!==n?(o=s.jsxs(se,{children:[a,n]}),e[13]=a,e[14]=n,e[15]=o):o=e[15];let D;e[16]===Symbol.for("react.memo_cache_sentinel")?(D=s.jsx(J,{children:"Confirmer la suppression"}),e[16]=D):D=e[16];const A=i?.name;let c;e[17]!==A?(c=s.jsx("strong",{children:A}),e[17]=A,e[18]=c):c=e[18];const E=i?.email;let m;e[19]!==c||e[20]!==E?(m=s.jsxs(K,{children:[D,s.jsxs(M,{children:["Êtes-vous sûr de vouloir supprimer le parent"," ",c," (",E,") ? Cette action est irréversible."]})]}),e[19]=c,e[20]=E,e[21]=m):m=e[21];let C;e[22]===Symbol.for("react.memo_cache_sentinel")?(C=s.jsx(z,{variant:"secondary",onClick:B,children:"Annuler"}),e[22]=C):C=e[22];let d;e[23]!==_?(d=s.jsxs(Q,{children:[C,s.jsx(z,{variant:"destructive",onClick:_,children:"Supprimer"})]}),e[23]=_,e[24]=d):d=e[24];let x;e[25]!==m||e[26]!==d?(x=s.jsxs(W,{children:[m,d]}),e[25]=m,e[26]=d,e[27]=x):x=e[27];let p;e[28]!==w||e[29]!==x?(p=s.jsx(X,{open:w,onOpenChange:P,children:x}),e[28]=w,e[29]=x,e[30]=p):p=e[30];let f;e[31]!==p||e[32]!==o?(f=s.jsxs("div",{className:"flex h-full flex-1 flex-col gap-6 overflow-x-auto rounded-xl p-4",children:[b,o,p]}),e[31]=p,e[32]=o,e[33]=f):f=e[33];let S;return e[34]!==f||e[35]!==r?(S=s.jsxs(G,{breadcrumbs:ae,children:[y,r,f]}),e[34]=f,e[35]=r,e[36]=S):S=e[36],S}function ne(u){return s.jsx(H,{variant:"secondary",children:u.name},u.id)}export{Te as default};
