import{c as Ze,r as W,u as et,j as r,a as tt,H as rt}from"./app-DE48DAeG.js";import{A as st}from"./app-layout-CQdXJcnl.js";import{a as ge,q as K,B as h}from"./index-Cr7VuEg-.js";import{I as Le}from"./input-CUkFJoHz.js";import{L as je}from"./label-CVsKJDdP.js";import{C as it}from"./checkbox-CPOIJ1VG.js";import{B as lt}from"./badge-CuO4Vd5G.js";import{D as $e,a as Be,b as Ue,c as Ge,d as Re,e as Ve}from"./dialog-D7IFXLJ4.js";import{C as ot,a as at,b as nt,c as dt}from"./card-Ds9L-jEf.js";import{I as ke}from"./input-error-XW4ZxNQd.js";import{T as ct}from"./textarea-SpuvtA2K.js";import{F as mt}from"./fullscreen-loader-CVBFq3C8.js";import{B as ut}from"./book-open-kp0bz5Wp.js";import{P as pt,T as ht}from"./trash-2-X-lnmqNH.js";import{P as ft}from"./plus-jddTSwcr.js";/* empty css            */import"./index-DStLr-WX.js";import"./index-CgIhwCxr.js";import"./index-CXqT-9Uj.js";import"./index-DJ0YarZM.js";import"./appearance-toggle-Cemvmr4G.js";import"./app-logo-icon-DOr4Ax2k.js";import"./users-DEy5ZNYU.js";import"./circle-check-ApVl8IwL.js";import"./index-Ciis3uKO.js";import"./check-92yqOgbm.js";import"./spinner-CVlA4gbq.js";import"./loader-circle-CeztOMt_.js";import"./proxy-Biv1arMv.js";const n=(t,e)=>({url:n.url(t,e),method:"patch"});n.definition={methods:["patch"],url:"/admin/matieres/{id}"};n.url=(t,e)=>{(typeof t=="string"||typeof t=="number")&&(t={id:t}),Array.isArray(t)&&(t={id:t[0]}),t=ge(t);const a={id:t.id};return n.definition.url.replace("{id}",a.id.toString()).replace(/\/+$/,"")+K(e)};n.patch=(t,e)=>({url:n.url(t,e),method:"patch"});const Je=(t,e)=>({action:n.url(t,{[e?.mergeQuery?"mergeQuery":"query"]:{_method:"PATCH",...e?.query??e?.mergeQuery??{}}}),method:"post"});Je.patch=(t,e)=>({action:n.url(t,{[e?.mergeQuery?"mergeQuery":"query"]:{_method:"PATCH",...e?.query??e?.mergeQuery??{}}}),method:"post"});n.form=Je;const xt={patch:Object.assign(n,n)},l=t=>({url:l.url(t),method:"get"});l.definition={methods:["get","head"],url:"/admin/matieres"};l.url=t=>l.definition.url+K(t);l.get=t=>({url:l.url(t),method:"get"});l.head=t=>({url:l.url(t),method:"head"});const we=t=>({action:l.url(t),method:"get"});we.get=t=>({action:l.url(t),method:"get"});we.head=t=>({action:l.url({[t?.mergeQuery?"mergeQuery":"query"]:{_method:"HEAD",...t?.query??t?.mergeQuery??{}}}),method:"get"});l.form=we;const d=t=>({url:d.url(t),method:"post"});d.definition={methods:["post"],url:"/admin/matieres"};d.url=t=>d.definition.url+K(t);d.post=t=>({url:d.url(t),method:"post"});const Ke=t=>({action:d.url(t),method:"post"});Ke.post=t=>({action:d.url(t),method:"post"});d.form=Ke;const o=(t,e)=>({url:o.url(t,e),method:"get"});o.definition={methods:["get","head"],url:"/admin/matieres/{id}"};o.url=(t,e)=>{(typeof t=="string"||typeof t=="number")&&(t={id:t}),Array.isArray(t)&&(t={id:t[0]}),t=ge(t);const a={id:t.id};return o.definition.url.replace("{id}",a.id.toString()).replace(/\/+$/,"")+K(e)};o.get=(t,e)=>({url:o.url(t,e),method:"get"});o.head=(t,e)=>({url:o.url(t,e),method:"head"});const ze=(t,e)=>({action:o.url(t,e),method:"get"});ze.get=(t,e)=>({action:o.url(t,e),method:"get"});ze.head=(t,e)=>({action:o.url(t,{[e?.mergeQuery?"mergeQuery":"query"]:{_method:"HEAD",...e?.query??e?.mergeQuery??{}}}),method:"get"});o.form=ze;const m=(t,e)=>({url:m.url(t,e),method:"put"});m.definition={methods:["put"],url:"/admin/matieres/{id}"};m.url=(t,e)=>{(typeof t=="string"||typeof t=="number")&&(t={id:t}),Array.isArray(t)&&(t={id:t[0]}),t=ge(t);const a={id:t.id};return m.definition.url.replace("{id}",a.id.toString()).replace(/\/+$/,"")+K(e)};m.put=(t,e)=>({url:m.url(t,e),method:"put"});const We=(t,e)=>({action:m.url(t,{[e?.mergeQuery?"mergeQuery":"query"]:{_method:"PUT",...e?.query??e?.mergeQuery??{}}}),method:"post"});We.put=(t,e)=>({action:m.url(t,{[e?.mergeQuery?"mergeQuery":"query"]:{_method:"PUT",...e?.query??e?.mergeQuery??{}}}),method:"post"});m.form=We;const c=(t,e)=>({url:c.url(t,e),method:"delete"});c.definition={methods:["delete"],url:"/admin/matieres/{id}"};c.url=(t,e)=>{(typeof t=="string"||typeof t=="number")&&(t={id:t}),Array.isArray(t)&&(t={id:t[0]}),t=ge(t);const a={id:t.id};return c.definition.url.replace("{id}",a.id.toString()).replace(/\/+$/,"")+K(e)};c.delete=(t,e)=>({url:c.url(t,e),method:"delete"});const Xe=(t,e)=>({action:c.url(t,{[e?.mergeQuery?"mergeQuery":"query"]:{_method:"DELETE",...e?.query??e?.mergeQuery??{}}}),method:"post"});Xe.delete=(t,e)=>({action:c.url(t,{[e?.mergeQuery?"mergeQuery":"query"]:{_method:"DELETE",...e?.query??e?.mergeQuery??{}}}),method:"post"});c.form=Xe;Object.assign(l,l),Object.assign(d,d),Object.assign(o,o),Object.assign(m,xt),Object.assign(c,c);const yt=[{title:"Matières",href:l().url}];function Vt(t){const e=Ze.c(120),{matieres:a}=t,[ve,be]=W.useState(!1),[De,X]=W.useState(!1),[f,He]=W.useState(null),[u,Ne]=W.useState(null),[Ie,Y]=W.useState(!1);let Z;e[0]===Symbol.for("react.memo_cache_sentinel")?(Z={name:"",code:"",description:"",is_active:!0},e[0]=Z):Z=e[0];const s=et(Z);let ee;e[1]===Symbol.for("react.memo_cache_sentinel")?(ee=i=>{He(i),be(!0)},e[1]=ee):ee=e[1];const Ye=ee;let te;e[2]===Symbol.for("react.memo_cache_sentinel")?(te=()=>{He(null),be(!1)},e[2]=te):te=e[2];const Pe=te;let re;e[3]!==f?(re=()=>{f&&(Y(!0),tt.delete(l().url.replace("/index","")+`/${f.id}`,{preserveScroll:!0,onSuccess:()=>{Pe(),Y(!1)},onError:()=>{Y(!1)},onFinish:()=>{Y(!1)}}))},e[3]=f,e[4]=re):re=e[4];const _e=re;let se;e[5]!==s?(se=i=>{Ne(i),s.setData({name:i.name,code:i.code,description:i.description||"",is_active:i.is_active}),X(!0)},e[5]=s,e[6]=se):se=e[6];const Ce=se;let ie;e[7]!==s?(ie=()=>{Ne(null),s.reset(),s.setData({name:"",code:"",description:"",is_active:!0}),X(!0)},e[7]=s,e[8]=ie):ie=e[8];const Se=ie;let le;e[9]!==s?(le=()=>{X(!1),Ne(null),s.reset(),s.clearErrors()},e[9]=s,e[10]=le):le=e[10];const p=le;let oe;e[11]!==p||e[12]!==u||e[13]!==s?(oe=i=>{i.preventDefault(),u?s.put(l().url.replace("/index","")+`/${u.id}`,{preserveScroll:!0,onSuccess:()=>{p()}}):s.post(l().url,{preserveScroll:!0,onSuccess:()=>{p()}})},e[11]=p,e[12]=u,e[13]=s,e[14]=oe):oe=e[14];const Ae=oe;let ae;e[15]===Symbol.for("react.memo_cache_sentinel")?(ae=r.jsx(rt,{title:"Gestion des matières"}),e[15]=ae):ae=e[15];const Qe=s.processing||Ie,qe=s.processing?u?"Modification de la matière en cours...":"Création de la matière en cours...":Ie?"Suppression de la matière en cours...":void 0;let x;e[16]!==Qe||e[17]!==qe?(x=r.jsx(mt,{isLoading:Qe,spinnerType:"loader2",message:qe,subtitle:"Veuillez patienter"}),e[16]=Qe,e[17]=qe,e[18]=x):x=e[18];let ne;e[19]===Symbol.for("react.memo_cache_sentinel")?(ne=r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-semibold",children:"Gestion des matières"}),r.jsx("p",{className:"text-muted-foreground text-sm",children:"Gérez les matières enseignées dans votre établissement"})]}),e[19]=ne):ne=e[19];let de;e[20]===Symbol.for("react.memo_cache_sentinel")?(de=r.jsx(ft,{className:"mr-2 size-4"}),e[20]=de):de=e[20];let y;e[21]!==Se?(y=r.jsxs("div",{className:"flex items-center justify-between",children:[ne,r.jsxs(h,{onClick:Se,children:[de,"Nouvelle matière"]})]}),e[21]=Se,e[22]=y):y=e[22];let ce;e[23]===Symbol.for("react.memo_cache_sentinel")?(ce=r.jsx(nt,{children:r.jsx(dt,{children:"Liste des matières"})}),e[23]=ce):ce=e[23];let j;e[24]!==a||e[25]!==Ce?(j=r.jsxs(ot,{children:[ce,r.jsx(at,{children:a.length===0?r.jsxs("div",{className:"py-8 text-center text-muted-foreground",children:[r.jsx(ut,{className:"mx-auto mb-4 size-12 opacity-50"}),r.jsx("p",{children:"Aucune matière trouvée"})]}):r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"w-full",children:[r.jsx("thead",{children:r.jsxs("tr",{className:"border-b",children:[r.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium",children:"Nom"}),r.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium",children:"Code"}),r.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium",children:"Description"}),r.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium",children:"Statut"}),r.jsx("th",{className:"px-4 py-3 text-right text-sm font-medium",children:"Actions"})]})}),r.jsx("tbody",{children:a.map(i=>r.jsxs("tr",{className:"border-b hover:bg-muted/50",children:[r.jsx("td",{className:"px-4 py-3",children:r.jsx("div",{className:"font-medium",children:i.name})}),r.jsx("td",{className:"px-4 py-3",children:r.jsx("code",{className:"text-muted-foreground rounded bg-muted px-2 py-1 text-xs",children:i.code})}),r.jsx("td",{className:"px-4 py-3",children:r.jsx("div",{className:"text-muted-foreground text-sm max-w-md truncate",children:i.description||"-"})}),r.jsx("td",{className:"px-4 py-3",children:r.jsx(lt,{variant:i.is_active?"success":"danger",children:i.is_active?"Actif":"Inactif"})}),r.jsx("td",{className:"px-4 py-3",children:r.jsxs("div",{className:"flex justify-end gap-2",children:[r.jsx(h,{variant:"ghost",size:"sm",onClick:()=>Ce(i),children:r.jsx(pt,{className:"size-4"})}),r.jsx(h,{variant:"ghost",size:"sm",onClick:()=>Ye(i),children:r.jsx(ht,{className:"size-4 text-destructive"})})]})})]},i.id))})]})})})]}),e[24]=a,e[25]=Ce,e[26]=j):j=e[26];const Fe=u?"Modifier la matière":"Créer une nouvelle matière";let g;e[27]!==Fe?(g=r.jsx($e,{children:Fe}),e[27]=Fe,e[28]=g):g=e[28];const Ee=u?"Modifiez les informations de la matière ci-dessous.":"Remplissez les informations pour créer une nouvelle matière.";let v;e[29]!==Ee?(v=r.jsx(Be,{children:Ee}),e[29]=Ee,e[30]=v):v=e[30];let b;e[31]!==g||e[32]!==v?(b=r.jsxs(Ue,{children:[g,v]}),e[31]=g,e[32]=v,e[33]=b):b=e[33];let me;e[34]===Symbol.for("react.memo_cache_sentinel")?(me=r.jsx(je,{htmlFor:"name",children:"Nom *"}),e[34]=me):me=e[34];let D;e[35]!==s?(D=i=>s.setData("name",i.target.value),e[35]=s,e[36]=D):D=e[36];let N;e[37]!==s.data.name||e[38]!==D?(N=r.jsx(Le,{id:"name",value:s.data.name,onChange:D,placeholder:"Ex: Mathématiques",required:!0}),e[37]=s.data.name,e[38]=D,e[39]=N):N=e[39];let _;e[40]!==s.errors.name?(_=r.jsx(ke,{message:s.errors.name}),e[40]=s.errors.name,e[41]=_):_=e[41];let C;e[42]!==N||e[43]!==_?(C=r.jsxs("div",{className:"grid gap-2",children:[me,N,_]}),e[42]=N,e[43]=_,e[44]=C):C=e[44];let ue;e[45]===Symbol.for("react.memo_cache_sentinel")?(ue=r.jsx(je,{htmlFor:"code",children:"Code *"}),e[45]=ue):ue=e[45];let S;e[46]!==s?(S=i=>s.setData("code",i.target.value.toUpperCase()),e[46]=s,e[47]=S):S=e[47];let A;e[48]!==s.data.code||e[49]!==S?(A=r.jsx(Le,{id:"code",value:s.data.code,onChange:S,placeholder:"Ex: MATH",required:!0}),e[48]=s.data.code,e[49]=S,e[50]=A):A=e[50];let Q;e[51]!==s.errors.code?(Q=r.jsx(ke,{message:s.errors.code}),e[51]=s.errors.code,e[52]=Q):Q=e[52];let q;e[53]!==A||e[54]!==Q?(q=r.jsxs("div",{className:"grid gap-2",children:[ue,A,Q]}),e[53]=A,e[54]=Q,e[55]=q):q=e[55];let pe;e[56]===Symbol.for("react.memo_cache_sentinel")?(pe=r.jsx(je,{htmlFor:"description",children:"Description"}),e[56]=pe):pe=e[56];let F;e[57]!==s?(F=i=>s.setData("description",i.target.value),e[57]=s,e[58]=F):F=e[58];let E;e[59]!==s.data.description||e[60]!==F?(E=r.jsx(ct,{id:"description",value:s.data.description,onChange:F,placeholder:"Description de la matière",rows:3}),e[59]=s.data.description,e[60]=F,e[61]=E):E=e[61];let T;e[62]!==s.errors.description?(T=r.jsx(ke,{message:s.errors.description}),e[62]=s.errors.description,e[63]=T):T=e[63];let O;e[64]!==E||e[65]!==T?(O=r.jsxs("div",{className:"grid gap-2",children:[pe,E,T]}),e[64]=E,e[65]=T,e[66]=O):O=e[66];let M;e[67]!==s?(M=i=>s.setData("is_active",i===!0),e[67]=s,e[68]=M):M=e[68];let k;e[69]!==s.data.is_active||e[70]!==M?(k=r.jsx(it,{id:"is_active",checked:s.data.is_active,onCheckedChange:M}),e[69]=s.data.is_active,e[70]=M,e[71]=k):k=e[71];let he;e[72]===Symbol.for("react.memo_cache_sentinel")?(he=r.jsx(je,{htmlFor:"is_active",className:"cursor-pointer",children:"Matière active"}),e[72]=he):he=e[72];let w;e[73]!==k?(w=r.jsxs("div",{className:"flex items-center space-x-2",children:[k,he]}),e[73]=k,e[74]=w):w=e[74];let z;e[75]!==p||e[76]!==s.processing?(z=r.jsx(h,{type:"button",variant:"secondary",onClick:p,disabled:s.processing,children:"Annuler"}),e[75]=p,e[76]=s.processing,e[77]=z):z=e[77];const Te=u?"Modifier":"Créer";let H;e[78]!==s.processing||e[79]!==Te?(H=r.jsx(h,{type:"submit",disabled:s.processing,children:Te}),e[78]=s.processing,e[79]=Te,e[80]=H):H=e[80];let I;e[81]!==z||e[82]!==H?(I=r.jsxs(Ge,{children:[z,H]}),e[81]=z,e[82]=H,e[83]=I):I=e[83];let P;e[84]!==Ae||e[85]!==C||e[86]!==q||e[87]!==O||e[88]!==w||e[89]!==I?(P=r.jsxs("form",{onSubmit:Ae,className:"space-y-4",children:[C,q,O,w,I]}),e[84]=Ae,e[85]=C,e[86]=q,e[87]=O,e[88]=w,e[89]=I,e[90]=P):P=e[90];let L;e[91]!==b||e[92]!==P?(L=r.jsxs(Re,{className:"max-w-2xl",children:[b,P]}),e[91]=b,e[92]=P,e[93]=L):L=e[93];let $;e[94]!==De||e[95]!==L?($=r.jsx(Ve,{open:De,onOpenChange:X,children:L}),e[94]=De,e[95]=L,e[96]=$):$=e[96];let fe;e[97]===Symbol.for("react.memo_cache_sentinel")?(fe=r.jsx($e,{children:"Confirmer la suppression"}),e[97]=fe):fe=e[97];const Oe=f?.name;let B;e[98]!==Oe?(B=r.jsx("strong",{children:Oe}),e[98]=Oe,e[99]=B):B=e[99];const Me=f?.code;let U;e[100]!==B||e[101]!==Me?(U=r.jsxs(Ue,{children:[fe,r.jsxs(Be,{children:["Êtes-vous sûr de vouloir supprimer la matière"," ",B," (",Me,") ? Cette action est irréversible."]})]}),e[100]=B,e[101]=Me,e[102]=U):U=e[102];let xe;e[103]===Symbol.for("react.memo_cache_sentinel")?(xe=r.jsx(h,{variant:"secondary",onClick:Pe,children:"Annuler"}),e[103]=xe):xe=e[103];let G;e[104]!==_e?(G=r.jsxs(Ge,{children:[xe,r.jsx(h,{variant:"destructive",onClick:_e,children:"Supprimer"})]}),e[104]=_e,e[105]=G):G=e[105];let R;e[106]!==U||e[107]!==G?(R=r.jsxs(Re,{children:[U,G]}),e[106]=U,e[107]=G,e[108]=R):R=e[108];let V;e[109]!==ve||e[110]!==R?(V=r.jsx(Ve,{open:ve,onOpenChange:be,children:R}),e[109]=ve,e[110]=R,e[111]=V):V=e[111];let J;e[112]!==y||e[113]!==j||e[114]!==$||e[115]!==V?(J=r.jsxs("div",{className:"flex h-full flex-1 flex-col gap-6 overflow-x-auto rounded-xl p-4",children:[y,j,$,V]}),e[112]=y,e[113]=j,e[114]=$,e[115]=V,e[116]=J):J=e[116];let ye;return e[117]!==x||e[118]!==J?(ye=r.jsxs(st,{breadcrumbs:yt,children:[ae,x,J]}),e[117]=x,e[118]=J,e[119]=ye):ye=e[119],ye}export{Vt as default};
