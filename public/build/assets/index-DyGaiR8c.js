import{c as I,b as O,r as B,j as s,a as _,H as R}from"./app-qCQb-rXY.js";import{h as M,j as $,k as q,A as J,f as K,l as Q}from"./app-layout-B_r3Rrx0.js";import{B as u}from"./index-2ggMmHzy.js";import{B as V}from"./badge-CL45NMRh.js";import{D as U,b as W,a as X,c as Y,d as Z,e as ee}from"./dialog-BtfiXu_M.js";import{b as se,c as te,a as le,C as ie}from"./card-jlbms5zY.js";import{F as re}from"./fullscreen-loader-84ZMV8ZG.js";import{G as ae}from"./appearance-toggle-ChiM-gZ_.js";import{E as oe}from"./eye-Ck40YKVk.js";import{P as ne,T as ce}from"./trash-2-D_wEUTA-.js";import{P as me}from"./plus-BlhY5y6F.js";/* empty css            */import"./index-DTzN7dy9.js";import"./index-C5Pla0PL.js";import"./index-CFui-q-R.js";import"./index-Bp3BDrT3.js";import"./app-logo-icon-0au9t1J9.js";import"./users-DTuUKQNx.js";import"./book-open-D8zXQ9gB.js";import"./circle-check-C-ylYjZw.js";import"./spinner-CjvqpGox.js";import"./loader-circle-DMxENiy8.js";import"./proxy-qTeWVQOY.js";const de=[{title:"Professeurs",href:K().url}];function He(h){const e=I.c(38),{teachers:l}=h,{auth:j}=O().props,[E,T]=B.useState(!1),[i,F]=B.useState(null),[k,g]=B.useState(!1);let v;e[0]===Symbol.for("react.memo_cache_sentinel")?(v=t=>{F(t),T(!0)},e[0]=v):v=e[0];const G=v;let N;e[1]===Symbol.for("react.memo_cache_sentinel")?(N=()=>{F(null),T(!1)},e[1]=N):N=e[1];const H=N;let y;e[2]!==i?(y=()=>{i&&(g(!0),_.delete(q(i.uuid).url,{preserveScroll:!0,onSuccess:()=>{H(),g(!1)},onError:()=>{g(!1)},onFinish:()=>{g(!1)}}))},e[2]=i,e[3]=y):y=e[3];const A=y;let b;e[4]===Symbol.for("react.memo_cache_sentinel")?(b=s.jsx(R,{title:"Liste des professeurs"}),e[4]=b):b=e[4];let r;e[5]!==k?(r=s.jsx(re,{isLoading:k,spinnerType:"loader2",message:"Suppression du professeur en cours...",subtitle:"Veuillez patienter"}),e[5]=k,e[6]=r):r=e[6];let D;e[7]===Symbol.for("react.memo_cache_sentinel")?(D=s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-semibold",children:"Liste des professeurs"}),s.jsx("p",{className:"text-muted-foreground text-sm",children:"Gérez les professeurs de votre établissement"})]}),e[7]=D):D=e[7];let C;e[8]===Symbol.for("react.memo_cache_sentinel")?(C=s.jsxs("div",{className:"flex items-center justify-between",children:[D,s.jsxs(u,{onClick:pe,className:"flex items-center gap-2",children:[s.jsx(me,{className:"h-4 w-4"}),"Ajouter un professeur"]})]}),e[8]=C):C=e[8];let a;e[9]!==l.length?(a=s.jsx(se,{children:s.jsxs(te,{children:["Professeurs (",l.length,")"]})}),e[9]=l.length,e[10]=a):a=e[10];let o;e[11]!==j||e[12]!==l?(o=s.jsx(le,{children:l.length===0?s.jsxs("div",{className:"py-8 text-center text-muted-foreground",children:[s.jsx(ae,{className:"mx-auto mb-4 size-12 opacity-50"}),s.jsx("p",{children:"Aucun professeur trouvé"})]}):s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full",children:[s.jsx("thead",{children:s.jsxs("tr",{className:"border-b",children:[s.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium",children:"Nom"}),s.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium",children:"Email"}),s.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium",children:"Rôles"}),s.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium",children:"Email vérifié"}),s.jsx("th",{className:"px-4 py-3 text-right text-sm font-medium",children:"Actions"})]})}),s.jsx("tbody",{children:l.map(t=>s.jsxs("tr",{className:"border-b hover:bg-muted/50",children:[s.jsx("td",{className:"px-4 py-3",children:s.jsx("div",{className:"font-medium",children:t.name})}),s.jsx("td",{className:"px-4 py-3",children:s.jsx("div",{className:"text-sm",children:t.email})}),s.jsx("td",{className:"px-4 py-3",children:s.jsx("div",{className:"flex flex-wrap gap-1",children:t.roles&&t.roles.length>0?t.roles.map(xe):s.jsx("span",{className:"text-muted-foreground text-xs",children:"Aucun rôle"})})}),s.jsx("td",{className:"px-4 py-3",children:s.jsx(V,{variant:t.email_verified_at?"success":"warning",children:t.email_verified_at?"Vérifié":"Non vérifié"})}),s.jsx("td",{className:"px-4 py-3",children:s.jsxs("div",{className:"flex justify-end gap-2",children:[s.jsx(u,{variant:"ghost",size:"sm",onClick:()=>_.visit(M(t.uuid).url),title:"Voir les détails",children:s.jsx(oe,{className:"size-4"})}),s.jsx(u,{variant:"ghost",size:"sm",onClick:()=>_.visit($(t.uuid).url),title:"Modifier les informations",children:s.jsx(ne,{className:"size-4 text-yellow-500"})}),s.jsx(u,{variant:"ghost",size:"sm",onClick:()=>G(t),disabled:t.id===j.user.id,title:t.id===j.user.id?"Vous ne pouvez pas supprimer votre propre compte":"Supprimer",children:s.jsx(ce,{className:"size-4 text-destructive"})})]})})]},t.id))})]})})}),e[11]=j,e[12]=l,e[13]=o):o=e[13];let n;e[14]!==a||e[15]!==o?(n=s.jsxs(ie,{children:[a,o]}),e[14]=a,e[15]=o,e[16]=n):n=e[16];let S;e[17]===Symbol.for("react.memo_cache_sentinel")?(S=s.jsx(U,{children:"Confirmer la suppression"}),e[17]=S):S=e[17];const P=i?.name;let c;e[18]!==P?(c=s.jsx("strong",{children:P}),e[18]=P,e[19]=c):c=e[19];const L=i?.email;let m;e[20]!==c||e[21]!==L?(m=s.jsxs(W,{children:[S,s.jsxs(X,{children:["Êtes-vous sûr de vouloir supprimer le professeur"," ",c," (",L,") ? Cette action est irréversible."]})]}),e[20]=c,e[21]=L,e[22]=m):m=e[22];let z;e[23]===Symbol.for("react.memo_cache_sentinel")?(z=s.jsx(u,{variant:"secondary",onClick:H,children:"Annuler"}),e[23]=z):z=e[23];let d;e[24]!==A?(d=s.jsxs(Y,{children:[z,s.jsx(u,{variant:"destructive",onClick:A,children:"Supprimer"})]}),e[24]=A,e[25]=d):d=e[25];let x;e[26]!==m||e[27]!==d?(x=s.jsxs(Z,{children:[m,d]}),e[26]=m,e[27]=d,e[28]=x):x=e[28];let p;e[29]!==E||e[30]!==x?(p=s.jsx(ee,{open:E,onOpenChange:T,children:x}),e[29]=E,e[30]=x,e[31]=p):p=e[31];let f;e[32]!==n||e[33]!==p?(f=s.jsxs("div",{className:"flex h-full flex-1 flex-col gap-6 overflow-x-auto rounded-xl p-4",children:[C,n,p]}),e[32]=n,e[33]=p,e[34]=f):f=e[34];let w;return e[35]!==f||e[36]!==r?(w=s.jsxs(J,{breadcrumbs:de,children:[b,r,f]}),e[35]=f,e[36]=r,e[37]=w):w=e[37],w}function xe(h){return s.jsx(V,{variant:"secondary",children:h.name},h.id)}function pe(){return _.visit(Q().url)}export{He as default};
